/*!
 * xl-form-create v1.0.22
 * (c) 2018-2021 stevenLikeWatermelon
 * 
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@form-create/utils"),require("@form-create/core")):"function"==typeof define&&define.amd?define(["exports","@form-create/utils","@form-create/core"],t):t((e=e||self).formCreate={},e.utils,e.createFormCreate)}(this,function(e,t,n){"use strict";var i="default"in n?n.default:n;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(){return(m=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}var y=["attrs","props","domProps"],v=["class","style","directives"],k=["on","nativeOn"],g=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},b=function(e){return e.reduce(function(e,t){for(var n in t)if(e[n])if(-1!==y.indexOf(n))e[n]=m({},e[n],t[n]);else if(-1!==v.indexOf(n)){var i=e[n]instanceof Array?e[n]:[e[n]],r=t[n]instanceof Array?t[n]:[t[n]];e[n]=i.concat(r)}else if(-1!==k.indexOf(n))for(var o in t[n])if(e[n][o]){var a=e[n][o]instanceof Array?e[n][o]:[e[n][o]],s=t[n][o]instanceof Array?t[n][o]:[t[n][o]];e[n][o]=a.concat(s)}else e[n][o]=t[n][o];else if("hook"==n)for(var l in t[n])e[n][l]=e[n][l]?g(e[n][l],t[n][l]):t[n][l];else e[n]=t[n];else e[n]=t[n];return e},{})},w="fc-elm-checkbox",x={name:w,props:{options:{type:Array,default:function(){return[]}},children:{type:Array,default:function(){return[]}},ctx:{type:Object,default:function(){return{}}},value:{type:Array,default:function(){return[]}},type:String},watch:{value:function(){this.update()}},data:function(){return{trueValue:[],unique:t.uniqueId()}},methods:{onInput:function(e){this.$emit("input",this.options.filter(function(t){return-1!==e.indexOf(t.label)}).map(function(e){return e.value}))},update:function(){var e=this;this.trueValue=this.value?this.options.filter(function(t){return-1!==e.value.indexOf(t.value)}).map(function(e){return e.label}):[]}},created:function(){this.update()},render:function(){var e=this,t=arguments[0];return t("XlCheckboxGroup",b([{},this.ctx,{on:{input:this.onInput},model:{value:e.trueValue,callback:function(t){e.trueValue=t}}}]),[this.options.map(function(n,i){var r=u({},n),o="button"===e.type?"ElCheckboxButton":"ElCheckbox";return delete r.value,t(o,{props:u({},r),key:w+o+i+e.unique})}).concat(this.chlidren)])}};var $="fc-upload-btn",I="fc-files",F="__fc_h",O="__fc_v",R="fc-upload",B="fc-upload-cover",S="fc-hide-btn";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".fc-upload-btn, .fc-files {\n    display: inline-block;\n    width: 58px;\n    height: 58px;\n    text-align: center;\n    line-height: 58px;\n    border: 1px solid #c0ccda;\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n    position: relative;\n    -webkit-box-shadow: 2px 2px 5px rgba(0, 0, 0, .1);\n    box-shadow: 2px 2px 5px rgba(0, 0, 0, .1);\n    margin-right: 4px;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.form-create .form-create .el-form-item {\n    margin-bottom: 22px;\n}\n\n.form-create .form-create .el-form-item .el-form-item {\n    margin-bottom: 0px;\n}\n\n.form-create .__fc_h {\n    display: none;\n}\n\n.form-create .__fc_v {\n    visibility: hidden;\n}\n\n.fc-files img {\n    width: 100%;\n    height: 100%;\n    display: inline-block;\n    vertical-align: top;\n}\n\n.fc-upload-btn {\n    border: 1px dashed #c0ccda;\n    cursor: pointer;\n}\n\n.fc-upload .fc-upload-cover {\n    opacity: 0;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0, 0, 0, .6);\n    -webkit-transition: opacity .3s;\n    -o-transition: opacity .3s;\n    transition: opacity .3s;\n}\n\n.fc-upload .fc-upload-cover i {\n    color: #fff;\n    font-size: 20px;\n    cursor: pointer;\n    margin: 0 2px;\n}\n\n.fc-files:hover .fc-upload-cover {\n    opacity: 1;\n}\n\n.fc-upload .el-upload {\n    display: block;\n}\n\n\n.form-create .el-form-item .el-rate {\n    margin-top: 10px;\n}\n\n.form-create .el-form-item .el-tree {\n    margin-top: 7px;\n}\n\n.fc-hide-btn .el-upload {\n    display: none;\n}\n");var P={name:"fc-elm-frame",props:{type:{type:String,default:"input"},field:{type:String,default:""},helper:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},src:{type:String,required:!0},icon:{type:String,default:"el-icon-upload2"},width:{type:String,default:"500px"},height:{type:String,default:"370px"},maxLength:{type:Number,default:0},okBtnText:{type:String,default:"确定"},closeBtnText:{type:String,default:"关闭"},modalTitle:String,handleIcon:{type:[String,Boolean],default:void 0},title:String,allowRemove:{type:Boolean,default:!0},onOpen:{type:Function,default:function(){}},onOk:{type:Function,default:function(){}},onCancel:{type:Function,default:function(){}},onLoad:{type:Function,default:function(){}},onBeforeRemove:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},onHandle:{type:Function,default:function(e){this.previewImage=this.getSrc(e),this.previewVisible=!0}},modal:{type:Object,default:function(){return{}}},srcKey:{type:[String,Number]},value:[Array,String,Number,Object],previewMask:void 0,footer:{type:Boolean,default:!0},reload:{type:Boolean,default:!0},closeBtn:{type:Boolean,default:!0},okBtn:{type:Boolean,default:!0}},data:function(){return{fileList:t.toArray(this.value),unique:t.uniqueId(),previewVisible:!1,frameVisible:!1,previewImage:""}},watch:{value:function(e){this.fileList=t.toArray(e)},fileList:function(e){var t=1===this.maxLength?e[0]||"":e;this.$emit("input",t),this.$emit("change",t)},src:function(e){this.modalVm&&(this.modalVm.src=e)}},methods:{key:function(e){return"fc-elm-frame"+e+this.unique},closeModel:function(e){this.$emit(e?"$close":"$ok"),this.reload&&(this.$off("$ok"),this.$off("$close")),this.frameVisible=!1},handleCancel:function(){this.previewVisible=!1},showModel:function(){this.disabled||!1===this.onOpen()||(this.frameVisible=!0)},makeInput:function(){var e=this,t=this.$createElement,n={type:"text",value:this.fileList.map(function(t){return e.getSrc(t)}).toString(),readonly:!0};return t("XlInput",b([{},{props:n},{key:this.key("input")}]),[this.fileList.length?t("i",{slot:"suffix",class:"el-input__icon el-icon-circle-close",on:{click:function(){return e.fileList=[]}}}):null,t("XlButton",b([{attrs:{icon:this.icon}},{on:{click:function(){return e.showModel()}}},{slot:"append"}]))])},makeGroup:function(e){var t=this.$createElement;return(!this.maxLength||this.fileList.length<this.maxLength)&&e.push(this.makeBtn()),t("div",{class:R,key:this.key("group")},d(e))},makeItem:function(e,t){return(0,this.$createElement)("div",{class:I,key:this.key("file"+e)},d(t))},valid:function(e){if(e!==this.field)throw new Error("frame 无效的字段值")},makeIcons:function(e,t){var n=this.$createElement;if(!1!==this.handleIcon||!0===this.allowRemove){var i=[];return("file"!==this.type&&!1!==this.handleIcon||"file"===this.type&&this.handleIcon)&&i.push(this.makeHandleIcon(e,t)),this.allowRemove&&i.push(this.makeRemoveIcon(e,t)),n("div",{class:B,key:this.key("uc")},[i])}},makeHandleIcon:function(e,t){var n=this;return(0,this.$createElement)("i",{class:!0===this.handleIcon||void 0===this.handleIcon?"el-icon-view":this.handleIcon,on:{click:function(){return n.handleClick(e)}},key:this.key("hi"+t)})},makeRemoveIcon:function(e,t){var n=this;return(0,this.$createElement)("i",{class:"el-icon-delete",on:{click:function(){return n.handleRemove(e)}},key:this.key("ri"+t)})},makeFiles:function(){var e=this,t=this.$createElement;return this.makeGroup(this.fileList.map(function(n,i){return e.makeItem(i,[t("i",{class:"el-icon-tickets",on:{click:function(){return e.handleClick(n)}}}),e.makeIcons(n,i)])}))},makeImages:function(){var e=this,t=this.$createElement;return this.makeGroup(this.fileList.map(function(n,i){return e.makeItem(i,[t("img",{attrs:{src:e.getSrc(n)}}),e.makeIcons(n,i)])}))},makeBtn:function(){var e=this,t=this.$createElement;return t("div",{class:$,on:{click:function(){return e.showModel()}},key:this.key("btn")},[t("i",{class:this.icon})])},handleClick:function(e){if(!this.disabled)return this.onHandle(e)},handleRemove:function(e){this.disabled||!1!==this.onBeforeRemove(e)&&(this.fileList.splice(this.fileList.indexOf(e),1),this.onRemove(e))},getSrc:function(e){return t.isUndef(this.srcKey)?e:e[this.srcKey]},frameLoad:function(e){var t=this;this.onLoad(e);try{!0===this.helper&&(e.form_create_helper={close:function(e){t.valid(e),t.closeModel()},set:function(e,n){t.valid(e),t.disabled||t.$emit("input",n)},get:function(e){return t.valid(e),t.value},onOk:function(e){return t.$on("$ok",e)},onClose:function(e){return t.$on("$close",e)}})}catch(e){console.log(e)}},makeFooter:function(){var e=this,t=this.$createElement,n=this.$props,i=n.okBtnText,r=n.closeBtnText,o=n.closeBtn,a=n.okBtn;if(n.footer)return t("div",{slot:"footer"},[o?t("XlButton",{on:{click:function(){return!1!==e.onCancel()&&e.closeModel(!0)}}},[r]):null,a?t("XlButton",{attrs:{type:"primary"},on:{click:function(){return!1!==e.onOk()&&e.closeModel()}}},[i]):null])}},render:function(){var e,t=this,n=arguments[0],i=this.type;e="input"===i?this.makeInput():"image"===i?this.makeImages():this.makeFiles();var r=this.$props,o=r.width,a=void 0===o?"30%":o,s=r.height,l=r.src,c=r.title,p=r.modalTitle;return this.$nextTick(function(){t.$refs.frame&&t.frameLoad(t.$refs.frame.contentWindow||{})}),n("div",[e,n("xl-dialog",{attrs:{modal:this.previewMask,title:p,visible:this.previewVisible},on:{close:this.handleCancel}},[n("img",{attrs:{alt:"example",src:this.previewImage},style:"width: 100%"})]),n("xl-dialog",b([{},{props:u({width:a,title:c},this.modal)},{attrs:{visible:this.frameVisible},on:{close:function(){return t.closeModel(!0)}}}]),[this.frameVisible||!this.reload?n("iframe",{ref:"frame",attrs:{src:l,frameBorder:"0"},style:{height:s,border:"0 none",width:"100%"}}):null,this.makeFooter()])])}},C={name:"fc-elm-radio",functional:!0,props:{options:{type:Array,default:function(){return[]}},type:String,unique:{default:function(){return t.uniqueId()}}},render:function(e,t){return e("XlRadioGroup",b([{},t.data]),[t.props.options.map(function(n,i){var r=u({},n),o="button"===t.props.type?"ElRadioButton":"ElRadio";return delete r.value,e(o,{props:u({},r),key:"fc-elm-radio"+o+i+t.unique})}).concat(t.chlidren)])}},T={name:"fc-elm-select",functional:!0,props:{options:{type:Array,default:function(){return[]}},unique:{default:function(){return t.uniqueId()}}},render:function(e,n){return e("XlSelect",b([{},n.data]),[n.props.options.map(function(i,r){var o=i.slot?t.toDefSlot(i.slot,e):[];return e("XlOption",{props:u({},i),key:"fc-elm-select"+r+n.props.unique},[o])}).concat(n.chlidren)])}},L={name:"fc-elm-tree",props:{ctx:{type:Object,default:function(){return{props:{}}}},children:{type:Array,default:function(){return[]}},type:{type:String,default:"checked"},value:{type:[Array,String,Number],default:function(){return[]}}},watch:{value:function(){this.setValue()}},methods:{makeTree:function(){var e=this;return(0,this.$createElement)("XlTree",b([{ref:"tree",on:{"check-change":function(){return e.updateValue()},"node-click":function(){return e.updateValue()}}},this.ctx]),[this.children])},onChange:function(){this.updateValue()},updateValue:function(){var e;e="selected"===this.type.toLocaleLowerCase()?this.$refs.tree.getCurrentKey():this.$refs.tree.getCheckedKeys(),this.$emit("input",e)},setValue:function(){"selected"===this.type.toLocaleLowerCase()?this.$refs.tree.setCurrentKey(this.value):this.$refs.tree.setCheckedKeys(t.toArray(this.value))}},render:function(){return this.makeTree()},mounted:function(){this.setValue(),this.updateValue()}};function V(e,t){return{url:e,name:j(e),uid:t}}function j(e){return t.toString(e).split("/").pop()}var N=[x,P,C,T,L,{name:"fc-elm-upload",props:{ctx:{type:Object,default:function(){return{props:{}}}},children:{type:Array,default:function(){return[]}},onHandle:{type:Function,default:function(e){this.previewImage=e.url,this.previewVisible=!0}},uploadType:{type:String,default:"file"},maxLength:{type:Number,default:0},allowRemove:{type:Boolean,default:!0},previewMask:void 0,modalTitle:String,handleIcon:[String,Boolean],value:[Array,String]},data:function(){return{uploadList:[],unique:t.uniqueId(),previewVisible:!1,previewImage:""}},created:function(){void 0===this.ctx.props.showFileList&&(this.ctx.props.showFileList=!1),this.ctx.props.fileList=t.toArray(this.value).map(V)},watch:{value:function(e){this.$refs.upload.uploadFiles.every(function(e){return!e.status||"success"===e.status})&&(this.$refs.upload.uploadFiles=t.toArray(e).map(V),this.uploadList=this.$refs.upload.uploadFiles)},maxLength:function(e,t){1!==t&&1!==e||this.update()}},methods:{key:function(e){return"fc-elm-upload"+e+this.unique},isDisabled:function(){return!0===this.ctx.props.disabled},onRemove:function(e){this.isDisabled()||this.$refs.upload.handleRemove(e)},handleClick:function(e){this.onHandle(e)},makeDefaultBtn:function(){var e=this.$createElement;return e("div",{class:$},[e("i",{class:"el-icon-upload2"})])},makeItem:function(e,t){var n=this.$createElement;return"image"===this.uploadType?n("img",{attrs:{src:e.url},key:this.key("img"+t)}):n("i",{class:"el-icon-tickets",key:this.key("i"+t)})},makeRemoveIcon:function(e,t){var n=this;return(0,this.$createElement)("i",{class:"el-icon-delete",on:{click:function(){return n.onRemove(e)}},key:this.key("ri"+t)})},makeHandleIcon:function(e,t){var n=this;return(0,this.$createElement)("i",{class:!0===this.handleIcon||void 0===this.handleIcon?"el-icon-view":this.handleIcon,on:{click:function(){return n.handleClick(e)}},key:this.key("hi"+t)})},makeProgress:function(e,t){return(0,this.$createElement)("XlProgress",b([{},{props:{percentage:e.percentage,type:"circle",width:52}},{style:"margin-top:2px;",key:this.key("pg"+t)}]))},makeIcons:function(e,t){var n=this.$createElement,i=[];if(this.allowRemove||!1!==this.handleIcon)return("file"!==this.uploadType&&!1!==this.handleIcon||"file"===this.uploadType&&this.handleIcon)&&i.push(this.makeHandleIcon(e,t)),this.allowRemove&&i.push(this.makeRemoveIcon(e,t)),n("div",{class:B},[i])},makeFiles:function(){var e=this,t=this.$createElement;return this.uploadList.map(function(n,i){return t("div",{key:e.key(i),class:I},[void 0!==n.percentage&&"success"!==n.status?e.makeProgress(n,i):[e.makeItem(n,i),e.makeIcons(n,i)]])})},makeUpload:function(){return(0,this.$createElement)("XlUpload",b([{ref:"upload",style:{display:"inline-block"}},this.ctx,{key:this.key("upload")}]),[this.children])},initChildren:function(){t.hasSlot(this.children,"default")||this.children.push(this.makeDefaultBtn())},update:function(){var e=this.$refs.upload.uploadFiles.map(function(e){return e.url}).filter(function(e){return void 0!==e});this.$emit("input",1===this.maxLength?e[0]||"":e)},handleCancel:function(){this.previewVisible=!1}},render:function(){var e,t=arguments[0],n=!this.maxLength||this.maxLength>this.uploadList.length;return this.$refs.upload&&(void 0===this.ctx.props.showFileList&&(this.ctx.props.showFileList=this.$refs.upload.showFileList),this.ctx.props.fileList=this.$refs.upload.fileList),this.initChildren(),t("div",{class:(e={},s(e,R,!0),s(e,S,!n),e)},[[this.ctx.props.showFileList?[]:this.makeFiles(),this.makeUpload()],t("xl-dialog",{attrs:{modal:this.previewMask,title:this.modalTitle,visible:this.previewVisible},on:{close:this.handleCancel}},[t("img",{attrs:{alt:"example",src:this.previewImage},style:"width: 100%"})])])},mounted:function(){var e=this;this.uploadList=this.$refs.upload.uploadFiles,this.$watch(function(){return e.$refs.upload.uploadFiles},function(){e.update()},{deep:!0})}},{name:"fc-elm-group",props:{rule:Object,rules:Array,expand:Number,button:{type:Boolean,default:!0},formCreate:Object,max:{type:Number,default:0},min:{type:Number,default:0},value:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},fontSize:{type:Number,default:28}},data:function(){return{option:t.deepExtendArgs({},this.formCreate.config||{},{submitBtn:!1,resetBtn:!1,mounted:void 0,onReload:void 0}),len:0,cacheRule:{},group$f:{}}},computed:{formRule:function(){return this.rule?[this.rule]:this.rules?this.rules:[]}},watch:{disabled:function(e){var t=this.group$f;Object.keys(t).forEach(function(n){t[n].disabled(e)})},value:{handler:function(e){var t=this,n=Object.keys(this.cacheRule),i=n.length,r=i-e.length;if(r<0){for(var o=r;o<0;o++)this.addRule();for(var a=0;a<i;a++)this.setValue(this.group$f[n[a]],e[a])}else{if(r>0){for(var s=0;s<r;s++)this.removeRule(n[i-s-1]);this.subForm()}e.forEach(function(i,r){t.setValue(t.group$f[n[r]],e[r])})}},deep:!0}},methods:{formData:function(){var e=this,t=Object.keys(this.group$f).map(function(t){return e.group$f[t].formData()});this.$emit("input",t),this.$emit("change",t)},setValue:function(e,t){if(this.rule){var n=e.fields();if(!n[0])return;e.setValue(n[0],t)}else e.setValue(t)},addRule:function(e){var t=this,n=this.copyRule();this.$set(this.cacheRule,++this.len,n),e&&this.$nextTick(function(){return t.$emit("add",n,Object.keys(t.cacheRule).length-1)})},add$f:function(e,t,n){this.group$f[t]=n,this.setValue(n,this.value[e]),this.subForm(),this.$emit("itemMounted",n,Object.keys(this.cacheRule).indexOf(t)),this.formData()},subForm:function(){var e=this;this.$emit("fc.subForm",Object.keys(this.group$f).map(function(t){return e.group$f[t]}))},removeRule:function(e,t){var n=this,i=Object.keys(this.cacheRule).indexOf(e);this.$delete(this.cacheRule,e),this.$delete(this.group$f,e),t&&this.$nextTick(function(){return n.$emit("remove",i)})},copyRule:function(){return n.copyRules(this.formRule)},add:function(){!this.disabled&&this.addRule(!0)},del:function(e){this.disabled||(this.removeRule(e,!0),this.subForm(),this.formData())},addIcon:function(e){return(0,this.$createElement)("i",{key:"a".concat(e),class:"el-icon-circle-plus-outline",style:"font-size:".concat(this.fontSize,"px;cursor:").concat(this.disabled?"not-allowed;color:#c9cdd4":"pointer",";"),on:{click:this.add}})},delIcon:function(e){var t=this;return(0,this.$createElement)("i",{key:"d".concat(e),class:"el-icon-remove-outline",style:"font-size:".concat(this.fontSize,"px;cursor:").concat(this.disabled?"not-allowed;color:#c9cdd4":"pointer;color:#606266",";"),on:{click:function(){return t.del(e)}}})},makeIcon:function(e,t,n){var i=this;return this.$scopedSlots.button?this.$scopedSlots.button({total:e,index:t,vm:this,key:n,del:function(){return i.del(n)},add:this.add}):0===t?[0!==this.max&&e>=this.max?null:this.addIcon(n),0===this.min||e>this.min?this.delIcon(n):null]:t>=this.min?this.delIcon(n):void 0},emitEvent:function(e,t,n,i){this.$emit.apply(this,[e].concat(d(t),[this.group$f[i],n]))}},created:function(){var e=(this.expand||0)-this.value.length;if(e>0)for(var t=0;t<e;t++)this.value.push({});for(var n=0;n<this.value.length;n++)this.addRule()},render:function(){var e=this,t=arguments[0],n=Object.keys(this.cacheRule),i=this.button;return 0===n.length?this.$scopedSlots.default?this.$scopedSlots.default({vm:this,add:this.add}):t("i",{key:"a_def",class:"el-icon-circle-plus-outline",style:"font-size:".concat(this.fontSize,"px;vertical-align:middle;color:").concat(this.disabled?"#c9cdd4;cursor: not-allowed":"#606266;cursor:pointer",";"),on:{click:this.add}}):t("div",{key:"con"},[n.map(function(r,o){var a=e.cacheRule[r];return t("XlRow",{attrs:{align:"middle",type:"flex"},key:r,style:"background-color:#f5f7fa;padding:10px;border-radius:5px;margin-bottom:10px;"},[t("XlCol",{attrs:{span:i?20:24}},[t("XlFormItem",[t("FormCreate",{on:{change:e.formData,"set-value":e.formData,"on-reload":e.formData,"emit-event":function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return e.emitEvent(t,i,o,r)},mounted:function(t){return e.add$f(o,r,t)}},attrs:{rule:a,option:e.option}})])]),i?t("XlCol",{attrs:{span:2,pull:1,push:1}},[e.makeIcon(n.length,o,r)]):null])})])}}],E={date:"yyyy-MM-dd",month:"yyyy-MM",datetime:"yyyy-MM-dd HH:mm:ss",week:"yyyywWW",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",monthrange:"yyyy-MM",datetimerange:"yyyy-MM-dd HH:mm:ss",year:"yyyy"},D=[{parser:function(e){function t(){return r(this,t),h(this,p(t).apply(this,arguments))}return c(t,n.BaseParser),a(t,[{key:"render",value:function(e){var t=this,n=this.$render.inputVData(this,!0).get();return this.vNode.checkbox({props:{ctx:n,type:n.props.type,options:this.rule.options,value:this.$handle.getFormData(this),children:e},on:{input:function(e){t.$render.onInput(t,e)}}})}}]),t}(),name:"checkbox"},{parser:function(e){function t(){return r(this,t),h(this,p(t).apply(this,arguments))}return c(t,n.BaseParser),a(t,[{key:"init",value:function(){var e=this.rule.props;e.valueFormat||(e.valueFormat=E[e.type]||E.date)}}]),t}(),name:"datePicker"},{parser:function(e){function t(){return r(this,t),h(this,p(t).apply(this,arguments))}return c(t,n.BaseParser),a(t,[{key:"render",value:function(e){var t=this.$render.inputVData(this).props("field",this.field);return this.vNode.frame(t,e)}},{key:"closeModel",value:function(){this.el.closeModel&&this.el.closeModel()}}]),t}(),name:"frame"},{parser:function(e){function t(){return r(this,t),h(this,p(t).apply(this,arguments))}return c(t,n.BaseParser),a(t,[{key:"render",value:function(){return[]}}]),t}(),name:"hidden"},{parser:function(e){function i(){return r(this,i),h(this,p(i).apply(this,arguments))}return c(i,n.BaseParser),a(i,[{key:"init",value:function(){var e=this.rule.props;e&&e.autosize&&e.autosize.minRows&&t.$set(e,"rows",e.autosize.minRows||2)}}]),i}(),name:"input"},{parser:function(e){function t(){return r(this,t),h(this,p(t).apply(this,arguments))}return c(t,n.BaseParser),a(t,[{key:"toFormValue",value:function(e){return this.rule.options.filter(function(t){return t.value===e}).reduce(function(e,t){return t.label},"")}},{key:"toValue",value:function(e){return this.rule.options.filter(function(t){return t.label===e}).reduce(function(e,t){return t.value},"")}},{key:"render",value:function(e){return this.vNode.radio(this.$render.inputVData(this).props({options:this.rule.options}),e)}}]),t}(),name:"radio"},{parser:function(e){function t(){return r(this,t),h(this,p(t).apply(this,arguments))}return c(t,n.BaseParser),a(t,[{key:"render",value:function(e){return this.vNode.select(this.$render.inputVData(this).props("options",this.rule.options),e)}}]),t}(),name:"select"},{parser:function(e){function t(){return r(this,t),h(this,p(t).apply(this,arguments))}return c(t,n.BaseParser),a(t,[{key:"toFormValue",value:function(e){var t=this.rule,n=Array.isArray(e),i=t.props,r=i.min||0;return!0===i.range?n?e:[r,parseFloat(e)||r]:n?parseFloat(e[0])||r:parseFloat(e)}}]),t}(),name:"slider"},{parser:function(e){function t(){return r(this,t),h(this,p(t).apply(this,arguments))}return c(t,n.BaseParser),a(t,[{key:"render",value:function(e){return this.vNode.switch(this.$render.inputVData(this).get(),e)}}]),t}(),name:"switch"},{parser:function(e){function t(){return r(this,t),h(this,p(t).apply(this,arguments))}return c(t,n.BaseParser),a(t,[{key:"init",value:function(){var e=this.rule.props;e.valueFormat||(e.valueFormat="HH:mm:ss")}}]),t}(),name:"timePicker"},{parser:function(e){function i(){return r(this,i),h(this,p(i).apply(this,arguments))}return c(i,n.BaseParser),a(i,[{key:"init",value:function(){var e=this.rule.props;t.isUndef(e.nodeKey)&&t.$set(e,"nodeKey","id"),t.isUndef(e.props)&&t.$set(e,"props",{label:"title"})}},{key:"render",value:function(e){var t=this,n=this.$render.parserToData(this).get();return this.vNode.tree({props:{ctx:n,children:e,value:this.$handle.getFormData(this),type:n.props.type},ref:this.refName,key:this.key,on:{input:function(e){t.$render.onInput(t,e)}}})}}]),i}(),name:"tree"},{parser:function(e){function t(){return r(this,t),h(this,p(t).apply(this,arguments))}return c(t,n.BaseParser),a(t,[{key:"render",value:function(e){var t=this,n=this.$render.parserToData(this).get(),i=this.key,r=this.refName;delete n.props.fileList;var o={uploadType:n.props.uploadType,maxLength:n.props.limit,modalTitle:n.props.modalTitle,handleIcon:n.props.handleIcon,onHandle:n.props.onHandle,allowRemove:n.props.allowRemove,previewMask:n.props.previewMask,value:this.$handle.getFormData(this),ctx:n,children:e};return this.vNode.upload({props:o,key:i,ref:r,on:{input:function(e){t.$render.onInput(t,e)}}})}}]),t}(),name:"upload"}];var A=/[A-Z]/;function M(e){return"tooltip"===e.type}var q=function(e){function i(){return r(this,i),h(this,p(i).apply(this,arguments))}return c(i,n.BaseForm),a(i,[{key:"inputVData",value:function(e){var n=e.rule.props||{};e.vData.attrs(Object.keys(n).reduce(function(e,i){var r,o;return r=i,o=n[i],A.test(r)||!t.isString(o)&&!t.isType(o,"Number")||(e[i]=n[i]),e},{})),!n.size&&this.options.form.size&&e.vData.props("size",this.options.form.size)}},{key:"validate",value:function(e){this.getFormRef().validate(function(t){e&&e(t)})}},{key:"validateField",value:function(e,t){this.getFormRef().validateField(e,t)}},{key:"resetField",value:function(e){this.vm.$refs[e.formItemRefName].resetField()}},{key:"clearValidateState",value:function(e){var t=this.vm.$refs[e.formItemRefName];t&&(t.validateMessage="",t.validateState="")}},{key:"beforeRender",value:function(){this.propsData=this.vData.props(this.options.form).props({model:this.$handle.formData,rules:this.$handle.validate,key:"form"+this.unique}).ref(this.refName).nativeOn({submit:t.preventDefault}).class(this.options.form.className).class("form-create",!0).key(this.unique).get()}},{key:"render",value:function(e){return e.length>0&&e.push(this.makeFormBtn()),this.vNode.form(this.propsData,[!1===this.options.row?e:this.makeRow(e)])}},{key:"makeRow",value:function(e){var t={},n=this.options.row||{};return n.class&&(t[n.class]=!0),this.vNode.row({props:n||{},key:"fr"+this.unique,class:t},e)}},{key:"container",value:function(e,t){return this.makeFormItem(t,e)}},{key:"makeFormItem",value:function(e,n){var i="fItem".concat(e.key).concat(this.unique),r=e.rule,o=e.field,a=e.formItemRefName,s=this.getGetCol(e),l=s.labelWidth||r.title?s.labelWidth:0,u=this.propsData.props,c=u.inline,p=u.col,f=this.vData.props({prop:o,rules:r.validate,labelWidth:t.toString(l),required:r.props.required}).key(i).ref(a).class(r.className).get(),h=this.vNode.formItem(f,[n,this.makeFormPop(e,i)]);return!0===c||!1===p?h:this.makeCol(s,e,i,[h])}},{key:"makeFormPop",value:function(e,n){var i=e.rule;if(i.title){var r=t.isString(i.title)?{title:i.title}:i.title,o=this.options.info||{},a=[r.title||""];return i.info&&a.push(this.vNode.make(M(o)?"el-tooltip":"el-popover",{props:u({},o,{content:i.info}),key:"pop".concat(n)},[this.vNode.icon({class:[o.icon||"el-icon-warning"],slot:M(o)?"default":"reference"})])),this.vNode.make("span",u({},r,{slot:"label"}),a)}}},{key:"makeCol",value:function(e,t,n,i){var r;void 0===e.span&&(e.span=24);var o=(s(r={},F,!!t.rule.hidden),s(r,O,!!t.rule.visibility),r);return e.class&&(o[e.class]=!0),this.vNode.col({props:e,class:o,key:"".concat(n,"col1")},i)}},{key:"makeFormBtn",value:function(){var e=[],t=!1!==this.vm.buttonProps&&!1!==this.vm.buttonProps.show,n=!1!==this.vm.resetProps&&!1!==this.vm.resetProps.show;return t&&e.push(this.makeSubmitBtn(n?19:24)),n&&e.push(this.makeResetBtn(4)),!0===this.propsData.props.inline?e:e.length?this.vNode.col({props:{span:24},key:"".concat(this.unique,"col2")},e):[]}},{key:"makeResetBtn",value:function(e){var n=this,i=this.vm.resetProps,r=i.col||{span:e,push:1};return this.vNode.col({props:r,key:"".concat(this.unique,"col3")},[this.vNode.button({key:"frsbtn".concat(this.unique),props:i,on:{click:function(){var e=n.$handle.fCreateApi;t.isFunction(i.click)?i.click(e):e.resetFields()}},style:{width:i.width}},[i.innerText])])}},{key:"makeSubmitBtn",value:function(e){var n=this,i=this.vm.buttonProps,r=i.col||{span:e};return this.vNode.col({props:r,key:"".concat(this.unique,"col4")},[this.vNode.button({key:"fbtn".concat(this.unique),props:i,on:{click:function(){var e=n.$handle.fCreateApi;t.isFunction(i.click)?i.click(e):e.submit()}},style:{width:i.width}},[i.innerText])])}}]),i}(),_=["year","month","date","dates","week","datetime","datetimeRange","dateRange"].reduce(function(e,t){return e[t]=n.creatorTypeFactory("datePicker",t.toLowerCase()),e},{}),z={frameInputs:["input",0],frameFiles:["file",0],frameImages:["image",0],frameInputOne:["input",1],frameFileOne:["file",1],frameImageOne:["image",1]},H=Object.keys(z).reduce(function(e,t){return e[t]=n.creatorTypeFactory("frame",function(e){return e.props({type:z[t][0],maxLength:z[t][1]})}),e},{});H.frameInput=H.frameInputs,H.frameFile=H.frameFiles,H.frameImage=H.frameImages;var X=["password","url","email","text","textarea"].reduce(function(e,t){return e[t]=n.creatorTypeFactory("input",t),e},{});X.idate=n.creatorTypeFactory("input","date");var K={selectMultiple:n.creatorTypeFactory("select",!0,"multiple"),selectOne:n.creatorTypeFactory("select",!1,"multiple")},W={sliderRange:n.creatorTypeFactory("slider",!0,"range")},G={time:n.creatorTypeFactory("timePicker",function(e){return e.props.isRange=!1}),timeRange:n.creatorTypeFactory("timePicker",function(e){return e.props.isRange=!0})},U={treeSelected:"selected",treeChecked:"checked"},Z=Object.keys(U).reduce(function(e,t){return e[t]=n.creatorTypeFactory("tree",U[t]),e},{}),J={image:["image",0],file:["file",0],uploadFileOne:["file",1],uploadImageOne:["image",1]},Q=Object.keys(J).reduce(function(e,t){return e[t]=n.creatorTypeFactory("upload",function(e){return e.props({uploadType:J[t][0],maxLength:J[t][1]})}),e},{});Q.uploadImage=Q.image,Q.uploadFile=Q.file;var Y=u({},_,{},H,{},X,{},K,{},W,{},G,{},Z,{},Q);["autoComplete","cascader","colorPicker","datePicker","frame","inputNumber","radio","rate","group"].forEach(function(e){Y[e]=n.creatorFactory(e)}),Y.auto=Y.autoComplete,Y.number=Y.inputNumber,Y.color=Y.colorPicker,Y.hidden=function(e,t){return n.creatorFactory("hidden")("",e,t)},n.VNode.use({button:"el-button",icon:"i",slider:"el-slider",rate:"el-rate",upload:"fc-elm-upload",cascader:"el-cascader",colorPicker:"el-color-picker",timePicker:"el-time-picker",datePicker:"el-date-picker",switch:"el-switch",select:"fc-elm-select",checkbox:"fc-elm-checkbox",radio:"fc-elm-radio",inputNumber:"el-input-number",input:"el-input",formItem:"el-form-Item",form:"el-form",frame:"fc-elm-frame",col:"el-col",row:"el-row",tree:"fc-elm-tree",autoComplete:"el-autocomplete",group:"fc-elm-group"});var ee=i({ui:"element-ui",version:"".concat("1.0.22"),formRender:q,components:N,parsers:D,makers:Y,getConfig:function(){return{form:{inline:!1,labelPosition:"right",labelSuffix:void 0,hideRequiredAsterisk:!1,labelWidth:"125px",showMessage:!0,inlineMessage:!1,statusIcon:!1,validateOnRuleChange:!0,disabled:!1,size:void 0},row:{gutter:0,type:void 0,align:void 0,justify:void 0,tag:"div"},info:{type:"popover",trigger:"hover",placement:"top-start",icon:"el-icon-warning"},submitBtn:{type:"primary",size:"medium",plain:!1,round:!1,circle:!1,loading:!1,disabled:!1,icon:"el-icon-upload",width:"100%",autofocus:!1,nativeType:"button",innerText:"提交",show:!0,col:void 0,click:void 0},resetBtn:{type:"default",size:"medium",plain:!1,round:!1,circle:!1,loading:!1,disabled:!1,icon:"el-icon-refresh",width:"100%",autofocus:!1,nativeType:"button",innerText:"重置",show:!1,col:void 0,click:void 0}}}}),te=ee.FormCreate,ne=ee.install;"undefined"!=typeof window&&(window.formCreate=te,window.Vue&&ne(window.Vue));var ie=te.maker;e.default=te,e.maker=ie,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=form-create.min.js.map
