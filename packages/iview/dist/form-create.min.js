/*!
 * @xl-form-create/iview v1.0.20
 * (c) 2018-2021 xaboy
 * Github https://github.com/xaboy/form-create
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@xl-form-create/utils"),require("iview"),require("@xl-form-create/core")):"function"==typeof define&&define.amd?define(["exports","@xl-form-create/utils","iview","@xl-form-create/core"],t):t((e=e||self).formCreate={},e.utils,e.iview,e.createFormCreate)}(this,function(e,t,n,i){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;var r="default"in i?i.default:i;function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(){return(v=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}var y=["attrs","props","domProps"],k=["class","style","directives"],g=["on","nativeOn"],b=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},w=function(e){return e.reduce(function(e,t){for(var n in t)if(e[n])if(-1!==y.indexOf(n))e[n]=v({},e[n],t[n]);else if(-1!==k.indexOf(n)){var i=e[n]instanceof Array?e[n]:[e[n]],r=t[n]instanceof Array?t[n]:[t[n]];e[n]=i.concat(r)}else if(-1!==g.indexOf(n))for(var o in t[n])if(e[n][o]){var a=e[n][o]instanceof Array?e[n][o]:[e[n][o]],s=t[n][o]instanceof Array?t[n][o]:[t[n][o]];e[n][o]=a.concat(s)}else e[n][o]=t[n][o];else if("hook"==n)for(var u in t[n])e[n][u]=e[n][u]?b(e[n][u],t[n][u]):t[n][u];else e[n]=t[n];else e[n]=t[n];return e},{})},I="fc-ivu-checkbox",$={name:I,props:{options:{type:Array,default:function(){return[]}},children:{type:Array,default:function(){return[]}},ctx:{type:Object,default:function(){return{}}},value:{type:Array,default:function(){return[]}}},watch:{value:function(){this.update()}},data:function(){return{trueValue:[],unique:t.uniqueId()}},methods:{onInput:function(e){this.$emit("input",this.options.filter(function(t){return-1!==e.indexOf(t.label)}).map(function(e){return e.value}))},update:function(){var e=this;this.trueValue=this.value?this.options.filter(function(t){return-1!==e.value.indexOf(t.value)}).map(function(e){return e.label}):[]}},created:function(){this.update()},render:function(){var e=this,t=arguments[0];return t("CheckboxGroup",w([{},this.ctx,{on:{input:this.onInput},model:{value:e.trueValue,callback:function(t){e.trueValue=t}}}]),[this.options.map(function(n,i){var r=l({},n);return delete r.value,t("Checkbox",{props:l({},r),key:I+i+e.unique})}).concat(this.chlidren)])}},x={_v:2,resetBtnType:"ghost",resetBtnIcon:"refresh",submitBtnIcon:"ios-upload",fileIcon:"document-text",fileUpIcon:"folder",imgUpIcon:"image",infoIcon:"ios-information-outline",removeIcon:"ios-minus-outline",addIcon:"ios-plus-outline"},O={_v:3,resetBtnType:"default",resetBtnIcon:"md-refresh",submitBtnIcon:"ios-share",fileIcon:"md-document",fileUpIcon:"ios-folder-open",imgUpIcon:"md-images",infoIcon:"ios-information-circle-outline",removeIcon:"ios-remove-circle-outline",addIcon:"ios-add-circle-outline"},F=void 0===n?x:n.version&&n.version.split(".")[0]>2?O:x;var R="fc-upload-btn",B="fc-files",T="fc-upload",S="__fc_h",P="__fc_v",D="fc-upload-cover",L="fc-hide-btn";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".fc-upload-btn, .fc-files {\n    display: inline-block;\n    width: 58px;\n    height: 58px;\n    text-align: center;\n    line-height: 58px;\n    border: 1px solid #c0ccda;\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n    position: relative;\n    box-shadow: 2px 2px 5px rgba(0, 0, 0, .1);\n    margin-right: 4px;\n    box-sizing: border-box;\n}\n\n.form-create .form-create .ivu-form-item {\n    margin-bottom: 24px;\n}\n\n.form-create .form-create .ivu-form-item .ivu-form-item {\n    margin-bottom: 0px;\n}\n\n.form-create .fc-group .ivu-icon + .ivu-icon {\n    margin-left: 3px;\n}\n\n.form-create .fc-upload .ivu-icon {\n    vertical-align: middle;\n}\n\n.form-create .__fc_h {\n    display: none;\n}\n\n.form-create .__fc_v {\n    visibility: hidden;\n}\n\n.fc-pop2 {\n    text-align: left;\n    vertical-align: -0.2em;\n}\n\n.fc-pop3 {\n    vertical-align: 0.1em;\n}\n\n.fc-files img {\n    width: 100%;\n    height: 100%;\n    display: inline-block;\n    vertical-align: top;\n}\n\n.fc-upload-btn {\n    border: 1px dashed #c0ccda;\n    cursor: pointer;\n}\n\n.fc-upload .fc-upload-cover {\n    opacity: 0;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0, 0, 0, .6);\n    transition: opacity .3s;\n}\n\n.fc-upload .fc-upload-cover i {\n    color: #fff;\n    font-size: 20px;\n    cursor: pointer;\n    margin: 0 2px;\n}\n\n.fc-files:hover .fc-upload-cover {\n    opacity: 1;\n}\n\n.fc-hide-btn .ivu-upload .ivu-upload {\n    display: none;\n}\n\n.fc-upload .ivu-upload-list {\n    margin-top: 0;\n}\n");var N={name:"fc-ivu-frame",props:{type:{type:String,default:"input"},field:{type:String,default:""},helper:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},src:{type:String,required:!0},icon:{type:String,default:F.fileUpIcon},width:{type:[Number,String],default:500},height:{type:[Number,String],default:370},maxLength:{type:Number,default:0},okBtnText:{type:String,default:"确定"},closeBtnText:{type:String,default:"关闭"},modalTitle:String,handleIcon:{type:[String,Boolean],default:void 0},title:String,allowRemove:{type:Boolean,default:!0},onOpen:{type:Function,default:function(){}},onOk:{type:Function,default:function(){}},onCancel:{type:Function,default:function(){}},onLoad:{type:Function,default:function(){}},onBeforeRemove:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},onHandle:{type:Function,default:function(e){this.previewImage=this.getSrc(e),this.previewVisible=!0}},modal:{type:Object,default:function(){return{}}},srcKey:{type:[String,Number]},value:[Array,String,Number,Object],previewMask:void 0,footer:{type:Boolean,default:!0},reload:{type:Boolean,default:!0},closeBtn:{type:Boolean,default:!0},okBtn:{type:Boolean,default:!0}},data:function(){return{fileList:t.toArray(this.value),unique:t.uniqueId(),previewVisible:!1,frameVisible:!1,previewImage:""}},watch:{value:function(e){this.fileList=t.toArray(e)},fileList:function(e){var t=1===this.maxLength?e[0]||"":e;this.$emit("input",t),this.$emit("on-change",t)},src:function(e){this.modalVm&&(this.modalVm.src=e)}},methods:{key:function(e){return"fc-ivu-frame"+e+this.unique},closeModel:function(e){this.$emit(e?"$close":"$ok"),this.reload&&(this.$off("$ok"),this.$off("$close")),this.frameVisible=!1},showModel:function(){this.disabled||!1===this.onOpen()||(this.frameVisible=!0)},makeInput:function(){var e=this,t=this.$createElement,n={type:"text",value:this.fileList.map(function(t){return e.getSrc(t)}).toString(),icon:this.icon,readonly:!0,clearable:!1};return t("Input",w([{},{props:n},{},{on:{"on-click":function(){return e.showModel()}}},{key:this.key("input")}]))},makeGroup:function(e){var t=this.$createElement;return(!this.maxLength||this.fileList.length<this.maxLength)&&e.push(this.makeBtn()),t("div",{class:T,key:this.key("group")},m(e))},makeItem:function(e,t){return(0,this.$createElement)("div",{class:B,key:this.key("file"+e)},m(t))},valid:function(e){if(e!==this.field)throw new Error("frame 无效的字段值")},makeIcons:function(e,t){var n=this.$createElement;if(!1!==this.handleIcon||!0===this.allowRemove){var i=[];return("file"!==this.type&&!1!==this.handleIcon||"file"===this.type&&this.handleIcon)&&i.push(this.makeHandleIcon(e,t)),this.allowRemove&&i.push(this.makeRemoveIcon(e,t)),n("div",{class:D,key:this.key("uc")},[i])}},makeHandleIcon:function(e,t){var n=this;return(0,this.$createElement)("icon",w([{},{props:{type:!0===this.handleIcon||void 0===this.handleIcon?"ios-eye-outline":this.handleIcon}},{on:{click:function(){return n.handleClick(e)}},key:this.key("hi"+t)}]))},makeRemoveIcon:function(e,t){var n=this;return(0,this.$createElement)("icon",w([{},{props:{type:"ios-trash-outline"}},{on:{click:function(){return n.handleRemove(e)}},key:this.key("ri"+t)}]))},makeFiles:function(){var e=this,t=this.$createElement;return this.makeGroup(this.fileList.map(function(n,i){return e.makeItem(i,[t("icon",w([{},{props:{type:F.fileIcon,size:40}},{on:{click:function(){return e.handleClick(n)}}}])),e.makeIcons(n,i)])}))},makeImages:function(){var e=this,t=this.$createElement;return this.makeGroup(this.fileList.map(function(n,i){return e.makeItem(i,[t("img",{attrs:{src:e.getSrc(n)}}),e.makeIcons(n,i)])}))},makeBtn:function(){var e=this,t=this.$createElement;return t("div",{class:R,on:{click:function(){return e.showModel()}},key:this.key("btn")},[t("icon",w([{},{props:{type:this.icon,size:20}}]))])},handleClick:function(e){if(!this.disabled)return this.onHandle(e)},handleRemove:function(e){this.disabled||!1!==this.onBeforeRemove(e)&&(this.fileList.splice(this.fileList.indexOf(e),1),this.onRemove(e))},getSrc:function(e){return t.isUndef(this.srcKey)?e:e[this.srcKey]},frameLoad:function(e){var t=this;this.onLoad(e);try{!0===this.helper&&(e.form_create_helper={close:function(e){t.valid(e),t.closeModel()},set:function(e,n){t.valid(e),t.disabled||t.$emit("input",n)},get:function(e){return t.valid(e),t.value},onOk:function(e){return t.$on("$ok",e)},onClose:function(e){return t.$on("$close",e)}})}catch(e){console.log(e)}},makeFooter:function(){var e=this,t=this.$createElement,n=this.$props,i=n.okBtnText,r=n.closeBtnText,o=n.closeBtn,a=n.okBtn,s=[];return n.footer?(o&&s.push(t("Button",{on:{click:function(){return!1!==e.onCancel()&&e.closeModel(!0)}}},[r])),a&&s.push(t("Button",{attrs:{type:"primary"},on:{click:function(){return!1!==e.onOk()&&e.closeModel()}}},[i])),s):s}},render:function(){var e,t=this,n=arguments[0],i=this.type;e="input"===i?this.makeInput():"image"===i?this.makeImages():this.makeFiles();var r=this.$props,o=r.width,a=r.height,s=r.src,u=r.title,c=r.modalTitle;return this.$nextTick(function(){t.$refs.frame&&t.frameLoad(t.$refs.frame.contentWindow||{})}),n("div",[e,n("Modal",{attrs:{mask:this.previewMask,title:c,footerHide:!0},model:{value:t.previewVisible,callback:function(e){t.previewVisible=e}}},[n("img",{attrs:{alt:"example",src:this.previewImage},style:"width: 100%"})]),n("Modal",w([{},{props:l({width:o,title:u},this.modal)},{on:{"on-cancel":function(){return t.closeModel(!0)}},model:{value:t.frameVisible,callback:function(e){t.frameVisible=e}}}]),[this.frameVisible||!this.reload?n("iframe",{ref:"frame",attrs:{src:s,frameBorder:"0"},style:{height:a,border:"0 none",width:"100%"}}):null,n("div",{slot:"footer"},[this.makeFooter()])])])}},V={name:"fc-ivu-radio",functional:!0,props:{options:{type:Array,default:function(){return[]}},unique:{default:function(){return t.uniqueId()}}},render:function(e,t){return e("RadioGroup",w([{},t.data]),[t.props.options.map(function(n,i){var r=l({},n);return delete r.value,e("Radio",{props:l({},r),key:"fc-ivu-radio"+i+t.props.unique})}).concat(t.chlidren)])}},j={name:"fc-ivu-select",functional:!0,props:{options:{type:Array,default:function(){return[]}},unique:{default:function(){return t.uniqueId()}}},render:function(e,n){return e("Select",w([{},n.data]),[n.props.options.map(function(i,r){var o=i.slot?t.toDefSlot(i.slot,e):[];return e("Option",{props:l({},i),key:"fc-ivu-select"+r+n.props.unique},[o])}).concat(n.chlidren)])}},C={name:"fc-ivu-tree",props:{ctx:{type:Object,default:function(){return{props:{}}}},children:{type:Array,default:function(){return[]}},type:{type:String,default:"checked"},value:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{treeData:[]}},watch:{value:function(e){this.setStatus(e)}},methods:{setStatus:function(e){var n=t.toArray(e),i=this.$refs.tree.data;"selected"===this.type?this.selected(i,n):this.checked(i,n)},selected:function(e,t){var n=this;e.forEach(function(e){n.$set(e,"selected",-1!==t.indexOf(e.id)),void 0!==e.children&&Array.isArray(e.children)&&n.selected(e.children,t)})},checked:function(e,t){var n=this;e.forEach(function(e){n.$set(e,"checked",-1!==t.indexOf(e.id)),void 0!==e.children&&Array.isArray(e.children)&&n.checked(e.children,t)})},makeTree:function(){return(0,this.$createElement)("Tree",w([{ref:"tree"},this.ctx]),[this.children])},updateTreeData:function(){var e=this.type.toLocaleLowerCase();this.treeData="selected"===e?this.$refs.tree.getSelectedNodes():this.$refs.tree.getCheckedNodes(),this.$emit("input",this.treeData.map(function(e){return e.id}))}},render:function(){return this.makeTree()},mounted:function(){var e=this;this.$nextTick(function(){e.setStatus(e.value),e.$watch(function(){return e.$refs.tree.flatState},function(){return e.updateTreeData()})})}};function A(e){return{url:e,name:E(e)}}function E(e){return t.toString(e).split("/").pop()}var _=[$,N,V,j,C,{name:"fc-ivu-upload",props:{ctx:{type:Object,default:function(){return{props:{}}}},children:{type:Array,default:function(){return[]}},onHandle:{type:Function,default:function(e){this.previewImage=e.url,this.previewVisible=!0}},uploadType:{type:String,default:"file"},maxLength:{type:Number,default:0},allowRemove:{type:Boolean,default:!0},modalTitle:String,handleIcon:[String,Boolean],previewMask:void 0,value:[Array,String]},data:function(){return{uploadList:[],unique:t.uniqueId(),previewVisible:!1,previewImage:""}},created:function(){void 0===this.ctx.props.showUploadList&&(this.ctx.props.showUploadList=!1),this.ctx.props.defaultFileList=t.toArray(this.value).map(A)},watch:{value:function(e){this.$refs.upload.fileList.every(function(e){return!e.status||"finished"===e.status})&&(this.$refs.upload.fileList=t.toArray(e).map(A),this.uploadList=this.$refs.upload.fileList)},maxLength:function(e,t){1!==t&&1!==e||this.update()}},methods:{key:function(e){return"fc-ivu-upload"+e+this.unique},isDisabled:function(){return!0===this.ctx.props.disabled},onRemove:function(e){this.isDisabled()||this.$refs.upload.handleRemove(e)},handleClick:function(e){this.onHandle(e)},makeDefaultBtn:function(){var e=this.$createElement;return e("div",{class:R},[e("icon",w([{},{props:{type:"file"===this.uploadType?"ios-cloud-upload-outline":F.imgUpIcon,size:20}}]))])},makeItem:function(e,t){var n=this.$createElement;return"image"===this.uploadType?n("img",{attrs:{src:e.url},key:this.key("img"+t)}):n("icon",w([{},{props:{type:F.fileIcon,size:40}},{key:this.key("i"+t)}]))},makeRemoveIcon:function(e,t){var n=this;return(0,this.$createElement)("icon",{attrs:{type:"ios-trash-outline"},on:{click:function(){return n.onRemove(e)}},key:this.key("ri"+t)})},makeHandleIcon:function(e,t){var n=this;return(0,this.$createElement)("icon",{attrs:{type:!0===this.handleIcon||void 0===this.handleIcon?"ios-eye-outline":this.handleIcon},on:{click:function(){return n.handleClick(e)}},key:this.key("hi"+t)})},makeProgress:function(e,t){return(0,this.$createElement)("Progress",w([{},{props:{percent:e.percentage,hideInfo:!0}},{style:"width:90%",key:this.key("pg"+t)}]))},makeIcons:function(e,t){var n=this.$createElement,i=[];if(this.allowRemove||!1!==this.handleIcon)return("file"!==this.uploadType&&!1!==this.handleIcon||"file"===this.uploadType&&this.handleIcon)&&i.push(this.makeHandleIcon(e,t)),this.allowRemove&&i.push(this.makeRemoveIcon(e,t)),n("div",{class:D},[i])},makeFiles:function(){var e=this,t=this.$createElement;return this.uploadList.map(function(n,i){return t("div",{key:e.key(i),class:B},[n.showProgress?e.makeProgress(n,i):[e.makeItem(n,i),e.makeIcons(n,i)]])})},makeUpload:function(){return(0,this.$createElement)("Upload",w([{ref:"upload",style:{display:"inline-block"}},this.ctx,{key:this.key("upload")}]),[this.children])},initChildren:function(){t.hasSlot(this.children,"default")||this.children.push(this.makeDefaultBtn())},update:function(){var e=this.$refs.upload.fileList.map(function(e){return e.url}).filter(function(e){return void 0!==e});this.$emit("input",1===this.maxLength?e[0]||"":e)},handleCancel:function(){this.previewVisible=!1}},render:function(){var e,t=this,n=arguments[0],i=!this.maxLength||this.maxLength>this.uploadList.length;return this.$refs.upload&&(void 0===this.ctx.props.showUploadList&&(this.ctx.props.showUploadList=this.$refs.upload.showUploadList),this.ctx.props.defaultFileList=this.$refs.upload.defaultFileList),this.initChildren(),n("div",{class:(e={},u(e,T,!0),u(e,L,!i),e)},[[this.ctx.props.showUploadList?[]:this.makeFiles(),this.makeUpload()],n("Modal",{attrs:{mask:this.previewMask,title:this.modalTitle,footerHide:!0},model:{value:t.previewVisible,callback:function(e){t.previewVisible=e}}},[n("img",{attrs:{alt:"example",src:this.previewImage},style:"width: 100%"})])])},mounted:function(){var e=this;this.uploadList=this.$refs.upload.fileList,this.$watch(function(){return e.$refs.upload.fileList},function(){e.update()},{deep:!0})}},{name:"fc-ivu-group",props:{rule:Object,rules:Array,expand:Number,button:{type:Boolean,default:!0},formCreate:Object,max:{type:Number,default:0},min:{type:Number,default:0},value:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},fontSize:{type:Number,default:28}},data:function(){return{option:t.deepExtendArgs({},this.formCreate.config||{},{submitBtn:!1,resetBtn:!1,mounted:void 0,onReload:void 0}),len:0,cacheRule:{},group$f:{}}},computed:{formRule:function(){return this.rule?[this.rule]:this.rules?this.rules:[]}},watch:{disabled:function(e){var t=this.group$f;Object.keys(t).forEach(function(n){t[n].disabled(e)})},value:{handler:function(e){var t=this,n=Object.keys(this.cacheRule),i=n.length,r=i-e.length;if(r<0){for(var o=r;o<0;o++)this.addRule();for(var a=0;a<i;a++)this.setValue(this.group$f[n[a]],e[a])}else{if(r>0){for(var s=0;s<r;s++)this.removeRule(n[i-s-1]);this.subForm()}e.forEach(function(i,r){t.setValue(t.group$f[n[r]],e[r])})}},deep:!0}},methods:{formData:function(){var e=this,t=Object.keys(this.group$f).map(function(t){return e.group$f[t].formData()});this.$emit("input",t),this.$emit("change",t)},setValue:function(e,t){if(this.rule){var n=e.fields();if(!n[0])return;e.setValue(n[0],t)}else e.setValue(t)},addRule:function(e){var t=this,n=this.copyRule();this.$set(this.cacheRule,++this.len,n),e&&this.$nextTick(function(){return t.$emit("add",n,Object.keys(t.cacheRule).length-1)})},add$f:function(e,t,n){this.group$f[t]=n,this.setValue(n,this.value[e]),this.subForm(),this.$emit("itemMounted",n,Object.keys(this.cacheRule).indexOf(t)),this.formData()},subForm:function(){var e=this;this.$emit("fc.subForm",Object.keys(this.group$f).map(function(t){return e.group$f[t]}))},removeRule:function(e,t){var n=this,i=Object.keys(this.cacheRule).indexOf(e);this.$delete(this.cacheRule,e),this.$delete(this.group$f,e),t&&this.$nextTick(function(){return n.$emit("remove",i)})},copyRule:function(){return i.copyRules(this.formRule)},add:function(){!this.disabled&&this.addRule(!0)},del:function(e){this.disabled||(this.removeRule(e,!0),this.subForm(),this.formData())},addIcon:function(e){return(0,this.$createElement)("Icon",{key:"a".concat(e),attrs:{type:F.addIcon},style:"font-size:".concat(this.fontSize,"px;cursor:").concat(this.disabled?"not-allowed;color:#c9cdd4":"pointer;color:#000"),on:{click:this.add}})},delIcon:function(e){var t=this;return(0,this.$createElement)("Icon",{key:"d".concat(e),attrs:{type:F.removeIcon},style:"font-size:".concat(this.fontSize,"px;cursor:").concat(this.disabled?"not-allowed;color:#c9cdd4":"pointer",";"),on:{click:function(){return t.del(e)}}})},makeIcon:function(e,t,n){var i=this;return this.$scopedSlots.button?this.$scopedSlots.button({total:e,index:t,vm:this,key:n,del:function(){return i.del(n)},add:this.add}):0===t?[0!==this.max&&e>=this.max?null:this.addIcon(n),0===this.min||e>this.min?this.delIcon(n):null]:t>=this.min?this.delIcon(n):void 0},emitEvent:function(e,t,n,i){this.$emit.apply(this,[e].concat(m(t),[this.group$f[i],n]))}},created:function(){var e=(this.expand||0)-this.value.length;if(e>0)for(var t=0;t<e;t++)this.value.push({});for(var n=0;n<this.value.length;n++)this.addRule()},render:function(){var e=this,t=arguments[0],n=Object.keys(this.cacheRule),i=this.button;return 0===n.length?this.$scopedSlots.default?this.$scopedSlots.default({vm:this,add:this.add}):t("Icon",{key:"a_def",attrs:{type:F.addIcon},style:"font-size:".concat(this.fontSize,"px;vertical-align:middle;cursor:").concat(this.disabled?"not-allowed;color:#c9cdd4":"pointer",";"),on:{click:this.add}}):t("div",{class:"fc-group",key:"con"},[n.map(function(r,o){var a=e.cacheRule[r];return t("Row",{attrs:{align:"middle",type:"flex"},key:r,style:"background-color:#f5f7fa;padding:10px;border-radius:5px;margin-bottom:10px;"},[t("Col",{attrs:{span:i?20:24}},[t("FormItem",[t("FormCreate",{on:{change:e.formData,"set-value":e.formData,"on-reload":e.formData,"emit-event":function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return e.emitEvent(t,i,o,r)},mounted:function(t){return e.add$f(o,r,t)}},attrs:{rule:a,option:e.option}})])]),i?t("Col",{attrs:{span:2,pull:1,push:1}},[e.makeIcon(n.length,o,r)]):null])})])}}],q=[{parser:function(e){function t(){return o(this,t),d(this,f(t).apply(this,arguments))}return p(t,i.BaseParser),s(t,[{key:"render",value:function(e){var t=this;return this.vNode.checkbox({props:{ctx:this.$render.inputVData(this,!0).get(),options:this.rule.options,value:this.$handle.getFormData(this),children:e},on:{input:function(e){t.$render.onInput(t,e)}}})}}]),t}(),name:"checkbox"},{parser:function(e){function n(){return o(this,n),d(this,f(n).apply(this,arguments))}return p(n,i.BaseParser),s(n,[{key:"init",value:function(){var e=this.rule.props;e.startDate&&t.$set(e,"startDate",t.timeStampToDate(e.startDate))}},{key:"isRange",value:function(){return this.el.type.includes("range")||this.el.multiple}},{key:"_toValue",value:function(e){var t=this.el.formatDate(e||""),n=this.el.separator,i=this.isRange();return t?i?t.split(n):t:i?this.el.multiple?[]:["",""]:t}},{key:"toValue",value:function(e){var t=this.$handle.vm.$refs[this.refName];return t?(this.el=t,this._toValue(e)):e}},{key:"toFormValue",value:function(e){var n,i=Array.isArray(e),r=this.rule.props,o=r.type||"date";return n=-1!==["daterange","datetimerange"].indexOf(o)?i?e.map(function(e){return e?t.timeStampToDate(e):""}):["",""]:"date"===o&&!0===r.multiple?toString(e):(n=i?e[0]||"":e)?t.timeStampToDate(n):""}},{key:"mounted",value:function(){var e=this;this.toFormValue=function(t){var n=e.el.parseDate(t);return e.isRange()?n:n[0]},this.toValue=this._toValue}}]),n}(),name:"datePicker"},{parser:function(e){function t(){return o(this,t),d(this,f(t).apply(this,arguments))}return p(t,i.BaseParser),s(t,[{key:"render",value:function(e){var t=this.$render.inputVData(this).props("field",this.field);return this.vNode.frame(t,e)}},{key:"closeModel",value:function(){this.el.closeModel&&this.el.closeModel()}}]),t}(),name:"frame"},{parser:function(e){function t(){return o(this,t),d(this,f(t).apply(this,arguments))}return p(t,i.BaseParser),s(t,[{key:"render",value:function(){return[]}}]),t}(),name:"hidden"},{parser:function(e){function n(){return o(this,n),d(this,f(n).apply(this,arguments))}return p(n,i.BaseParser),s(n,[{key:"init",value:function(){var e=this.rule.props;e.autosize&&e.autosize.minRows&&t.$set(e,"rows",e.autosize.minRows||2)}}]),n}(),name:"input"},{parser:function(e){function t(){return o(this,t),d(this,f(t).apply(this,arguments))}return p(t,i.BaseParser),s(t,[{key:"toFormValue",value:function(e){return this.rule.options.filter(function(t){return t.value===e}).reduce(function(e,t){return t.label},"")}},{key:"toValue",value:function(e){return this.rule.options.filter(function(t){return t.label===e}).reduce(function(e,t){return t.value},"")}},{key:"render",value:function(e){return this.vNode.radio(this.$render.inputVData(this).props({options:this.rule.options}),e)}}]),t}(),name:"radio"},{parser:function(e){function t(){return o(this,t),d(this,f(t).apply(this,arguments))}return p(t,i.BaseParser),s(t,[{key:"render",value:function(e){return this.vNode.select(this.$render.inputVData(this).props("options",this.rule.options),e)}}]),t}(),name:"select"},{parser:function(e){function t(){return o(this,t),d(this,f(t).apply(this,arguments))}return p(t,i.BaseParser),s(t,[{key:"toFormValue",value:function(e){var t=this.rule,n=Array.isArray(e),i=t.props,r=i.min||0;return!0===i.range?n?e:[r,parseFloat(e)||r]:n?parseFloat(e[0])||r:parseFloat(e)}}]),t}(),name:"slider"},{parser:function(e){function t(){return o(this,t),d(this,f(t).apply(this,arguments))}return p(t,i.BaseParser),s(t,[{key:"render",value:function(e){var t=this.rule.props.slot||{};return this.vNode.switch(this.$render.inputVData(this).scopedSlots({open:function(){return t.open},close:function(){return t.close}}).get(),e)}}]),t}(),name:"switch"},{parser:function(e){function t(){return o(this,t),d(this,f(t).apply(this,arguments))}return p(t,i.BaseParser),s(t,[{key:"render",value:function(e){var t=this,n=this.$render.parserToData(this).get();return this.vNode.tree({props:{ctx:n,children:e,value:this.$handle.getFormData(this),type:n.props.type},ref:this.refName,key:this.key,on:{input:function(e){t.$render.onInput(t,e)}}})}}]),t}(),name:"tree"},{parser:function(e){function t(){return o(this,t),d(this,f(t).apply(this,arguments))}return p(t,i.BaseParser),s(t,[{key:"render",value:function(e){var t=this,n=this.$render.parserToData(this).get(),i=this.key,r=this.refName;delete n.props.defaultFileList;var o={uploadType:n.props.uploadType,maxLength:n.props.maxLength,modalTitle:n.props.modalTitle,handleIcon:n.props.handleIcon,onHandle:n.props.onHandle,allowRemove:n.props.allowRemove,previewMask:n.props.previewMask,value:this.$handle.getFormData(this),ctx:n,children:e};return this.vNode.upload({props:o,key:i,ref:r,on:{input:function(e){t.$render.onInput(t,e)}}})}}]),t}(),name:"upload"}];var M=function(e){function n(){return o(this,n),d(this,f(n).apply(this,arguments))}return p(n,i.BaseForm),s(n,[{key:"inputVData",value:function(e){!e.rule.props.size&&this.options.form.size&&e.vData.props("size",this.options.form.size)}},{key:"validate",value:function(e){this.getFormRef().validate(function(t){e&&e(t)})}},{key:"validateField",value:function(e,t){this.getFormRef().validateField(e,t)}},{key:"resetField",value:function(e){this.vm.$refs[e.formItemRefName].resetField()}},{key:"clearValidateState",value:function(e){var t=this.vm.$refs[e.formItemRefName];t&&(t.validateMessage="",t.validateState="")}},{key:"beforeRender",value:function(){this.propsData=this.vData.props(this.options.form).props({model:this.$handle.formData,rules:this.$handle.validate,key:"form"+this.unique}).ref(this.refName).nativeOn({submit:t.preventDefault}).class(this.options.form.className).class("form-create",!0).key(this.unique).get()}},{key:"render",value:function(e){return e.length>0&&e.push(this.makeFormBtn()),this.vNode.form(this.propsData,[!1===this.options.row?e:this.makeRow(e)])}},{key:"makeRow",value:function(e){var t={},n=this.options.row||{};return n.class&&(t[n.class]=!0),this.vNode.row({props:n||{},key:"fr"+this.unique,class:t},e)}},{key:"container",value:function(e,t){return this.makeFormItem(t,e)}},{key:"makeFormItem",value:function(e,t){var n="fItem".concat(e.key).concat(this.unique),i=e.rule,r=e.field,o=e.formItemRefName,a=this.getGetCol(e),s=a.labelWidth||i.title?a.labelWidth:0,u=this.propsData.props,c=u.inline,l=u.col,p=this.vData.props({prop:r,label:i.title,rules:i.validate,labelWidth:s,required:i.props.required}).key(n).ref(o).class(i.className).get(),f=this.vNode.formItem(p,[t,this.makeFormPop(e,n)]);return!0===c||!1===l?f:this.makeCol(a,e,n,[f])}},{key:"makeFormPop",value:function(e,n){var i=e.rule;if(i.title){var r=t.isString(i.title)?{title:i.title}:i.title,o=this.options.info||{},a=[r.title||""];return i.info&&a.push(this.vNode.make(function(e){return"tooltip"===e.type}(o)?"Tooltip":"Poptip",{props:l({},o,{content:i.info}),class:"fc-pop"+F._v,key:"pop".concat(n)},[this.vNode.icon({props:{type:o.icon||F.infoIcon,size:16}})])),this.vNode.make("span",l({},r,{slot:"label"}),a)}}},{key:"makeCol",value:function(e,t,n,i){var r;void 0===e.span&&(e.span=24);var o=(u(r={},S,!!t.rule.hidden),u(r,P,!!t.rule.visibility),r);return e.class&&(o[e.class]=!0),this.vNode.col({props:e,class:o,key:"".concat(n,"col1")},i)}},{key:"makeFormBtn",value:function(){var e=[],t=!1!==this.vm.buttonProps&&!1!==this.vm.buttonProps.show,n=!1!==this.vm.resetProps&&!1!==this.vm.resetProps.show;return t&&e.push(this.makeSubmitBtn(n?19:24)),n&&e.push(this.makeResetBtn(4)),!0===this.propsData.props.inline?e:e.length?this.vNode.col({props:{span:24},key:"".concat(this.unique,"col2")},e):[]}},{key:"makeResetBtn",value:function(e){var n=this,i=this.vm.resetProps,r=i.col||{span:e,push:1};return this.vNode.col({props:r,key:"".concat(this.unique,"col3")},[this.vNode.button({key:"frsbtn".concat(this.unique),props:i,on:{click:function(){var e=n.$handle.fCreateApi;t.isFunction(i.click)?i.click(e):e.resetFields()}}},[i.innerText])])}},{key:"makeSubmitBtn",value:function(e){var n=this,i=this.vm.buttonProps,r=i.col||{span:e};return this.vNode.col({props:r,key:"".concat(this.unique,"col4")},[this.vNode.button({key:"fbtn".concat(this.unique),props:i,on:{click:function(){var e=n.$handle.fCreateApi;t.isFunction(i.click)?i.click(e):e.submit()}}},[i.innerText])])}}]),n}(),z=["date","dateRange","dateTime","dateTimeRange","year","month"].reduce(function(e,t){return e[t]=i.creatorTypeFactory("datePicker",t.toLowerCase()),e},{}),U={frameInputs:["input",0],frameFiles:["file",0],frameImages:["image",0],frameInputOne:["input",1],frameFileOne:["file",1],frameImageOne:["image",1]},H=Object.keys(U).reduce(function(e,t){return e[t]=i.creatorTypeFactory("frame",function(e){return e.props({type:U[t][0],maxLength:U[t][1]})}),e},{});H.frameInput=H.frameInputs,H.frameFile=H.frameFiles,H.frameImage=H.frameImages;var G=["password","url","email","text","textarea"].reduce(function(e,t){return e[t]=i.creatorTypeFactory("input",t),e},{});G.idate=i.creatorTypeFactory("input","date");var W={selectMultiple:i.creatorTypeFactory("select",!0,"multiple"),selectOne:i.creatorTypeFactory("select",!1,"multiple")},K={sliderRange:i.creatorTypeFactory("slider",!0,"range")},J={time:i.creatorTypeFactory("timePicker","time"),timeRange:i.creatorTypeFactory("timePicker","timerange")},Q={treeSelected:"selected",treeChecked:"checked"},X=Object.keys(Q).reduce(function(e,t){return e[t]=i.creatorTypeFactory("tree",Q[t]),e},{}),Y={image:["image",0],file:["file",0],uploadFileOne:["file",1],uploadImageOne:["image",1]},Z=Object.keys(Y).reduce(function(e,t){return e[t]=i.creatorTypeFactory("upload",function(e){return e.props({uploadType:Y[t][0],maxLength:Y[t][1]})}),e},{});Z.uploadImage=Z.image,Z.uploadFile=Z.file;var ee=l({},z,{},H,{},G,{},W,{},K,{},J,{},X,{},Z);["autoComplete","cascader","colorPicker","datePicker","frame","inputNumber","radio","rate","timePicker","group"].forEach(function(e){ee[e]=i.creatorFactory(e)}),ee.auto=ee.autoComplete,ee.number=ee.inputNumber,ee.color=ee.colorPicker,ee.hidden=function(e,t){return i.creatorFactory("hidden")("",e,t)},i.VNode.use({button:"i-button",icon:"Icon",slider:"Slider",rate:"Rate",upload:"fc-ivu-upload",cascader:"Cascader",colorPicker:"Color-Picker",timePicker:"Time-Picker",datePicker:"Date-Picker",switch:"i-switch",select:"fc-ivu-select",checkbox:"fc-ivu-checkbox",radio:"fc-ivu-radio",inputNumber:"Input-Number",input:"i-input",formItem:"Form-Item",form:"i-form",frame:"fc-ivu-frame",col:"i-col",row:"row",tree:"fc-ivu-tree",autoComplete:"AutoComplete",group:"fc-ivu-group"});var te=r({ui:"iview",version:"1.0.20",formRender:M,components:_,parsers:q,makers:ee,getConfig:function(){return{form:{inline:!1,labelPosition:"right",labelWidth:125,showMessage:!0,autocomplete:"off",size:void 0},row:{gutter:0,type:void 0,align:void 0,justify:void 0,className:void 0},info:{type:"poptip",trigger:"hover",placement:"top-start",wordWrap:!0,icon:F.infoIcon},submitBtn:{type:"primary",size:"large",shape:void 0,long:!0,htmlType:"button",disabled:!1,icon:F.submitBtnIcon,innerText:"提交",loading:!1,show:!0,col:void 0,click:void 0},resetBtn:{type:F.resetBtnType,size:"large",shape:void 0,long:!0,htmlType:"button",disabled:!1,icon:F.resetBtnIcon,innerText:"重置",loading:!1,show:!1,col:void 0,click:void 0}}}}),ne=te.FormCreate,ie=te.install;i.Creator.prototype.event=function(e,n){var i,r=this;return i=t.isPlainObject(e)?e:u({},e,n),Object.keys(i).forEach(function(e){var n=0===t.toString(e).indexOf("on-")?e:"on-".concat(e);r.on(n,i[e])}),this},"undefined"!=typeof window&&(window.formCreate=ne,window.Vue&&ie(window.Vue));var re=ne.maker;e.default=ne,e.maker=re,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=form-create.min.js.map
